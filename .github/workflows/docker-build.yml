name: CI Check

on:
  push:
    branches: [labs3]
  pull_request:
    branches: [labs3]

jobs:
  check:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout
      uses: actions/checkout@v4
    
    - name: Validate required files
      run: |
        echo "Проверка файлов для лабораторной работы:"
        
        # Обязательные файлы
        FILES=("Dockerfile" "index.html")
        
        ALL_OK=true
        for file in "${FILES[@]}"; do
          if [ -f "$file" ]; then
            echo "✅ $file"
          else
            echo "❌ $file - ОТСУТСТВУЕТ"
            ALL_OK=false
          fi
        done
        
        if [ "$ALL_OK" = false ]; then
          exit 1
        fi
        
        echo "Все обязательные файлы на месте!"
    
    - name: Check Dockerfile
      run: |
        echo "Проверка Dockerfile:"
        if [ -f "Dockerfile" ]; then
          echo "Содержимое:"
          echo "---"
          cat Dockerfile
          echo "---"
          
          # Проверяем базовые инструкции
          if grep -q "FROM" Dockerfile && grep -q "COPY" Dockerfile; then
            echo "✅ Dockerfile выглядит корректно"
          fi
        fi
